!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Keet=e()}}(function(){return function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){var n=t[r][1][e];return s(n||e)},p,p.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){t.exports=function(e){return Array.isArray(e)?e.map(function(e){return e}):function(e){var t={};if("object"!=typeof e)return t.copy=e,t.copy;for(var n in e)t[n]=e[n];return t}(e)}},{}],2:[function(e,t,n){var i=function(e,t){if(!t)return!1;for(var n=t.firstChild;null!==n;n=n.nextSibling)e.push(n),n.hasChildNodes()&&i(e,n)};n.loopChilds=i;n.updateElem=function(e,t){var n=[],s=[];n.push(e),s.push(t),i(n,e),i(s,t),n.map(function(e,t,i){var o,r;e&&1===e.nodeType&&e.hasAttributes()?function(e,t){if(e){if(e.length!==t.length)throw new Error("Nodes is not of same length, detach effected node as another component");for(var n=e.attributes,i={},s=n.length-1;s>=0;s--)i[n[s].name]=n[s].value;for(var o in i)t.attributes[o]&&t.attributes[o].name===o&&t.attributes[o].value!==i[o]&&t.setAttribute(o,i[o]);""===t.textContent&&e.textContent&&(t.textContent=e.textContent),"checkbox"===t.type&&!t.checked&&e.checked&&(t.checked=!0),"checkbox"===t.type&&t.checked&&!e.checked&&(t.checked=!1),i={}}}(s[t],e):e&&3===e.nodeType&&(o=s[t],r=e,o&&o.nodeValue!==r.nodeValue&&(r.nodeValue=o.nodeValue)),t===i.length-1&&(n.splice(0),s.splice(0))})}},{}],3:[function(e,t,n){var i=e("./copy"),s=e("./tag"),o=e("./tmplHandler"),r=e("./tmplStylesHandler"),a=e("./tmplClassHandler"),l=e("./tmplAttrHandler"),c=e("./processEvent"),p=e("./elementUtils").updateElem,u=e("./utils").selector,f=function(e,t){var n=this;if(e<this.__stateList__.length){var i=this.__stateList__[e],s=this[i];Object.defineProperty(this,i,{enumerable:!1,configurable:!0,get:function(){return s},set:function(e){s=e,function(){var e=this;Object.keys(this.base).map(function(t){var n,i=e.base[t]["keet-id"],s=u(i);s||"string"!=typeof e.base[t]||(s=document.getElementById(e.el));var o=[].slice.call(arguments);n=m.apply(e,[e.base[t]].concat(o)),p(s,n)})}.apply(n,t)}}),e++,f.apply(this,[e,t])}},h=function(e){f.apply(this,[0,e])},d=function(e){this.__stateList__=this.__stateList__.concat(e)},m=function(){var e=[].shift.call(arguments),t=[].slice.call(arguments),n=document.createElement("div"),p=i(e);delete p.template,delete p.tag,delete p.style,delete p.class,this.__stateList__=[];var u=e.template?o.call(this,e.template,d.bind(this)):"string"==typeof e?o.call(this,e,d.bind(this)):null,f=r.call(this,e.style,d.bind(this)),m=a.call(this,e,d.bind(this));m&&(p.class=m),t&&t.length&&l.apply(this,[p].concat(t));var y=e.tag?s(e.tag,u||"",p,f):u;return n.innerHTML=y,"input"===e.tag&&(p.checked?n.childNodes[0].checked=!0:n.childNodes[0].removeAttribute("checked")),h.call(this,t),c.call(this,n),"string"==typeof e?n:e.tag?n.childNodes[0]:n};n.genElement=m,n.setState=h,n.updateStateList=d},{"./copy":1,"./elementUtils":2,"./processEvent":6,"./tag":7,"./tmplAttrHandler":8,"./tmplClassHandler":9,"./tmplHandler":10,"./tmplStylesHandler":11,"./utils":12}],4:[function(e,t,n){var i=e("./processEvent");t.exports=function(e,t){for(var n,s=this.args,o=this.base.template,r=0,a=this.__stateList__.length;r<a;r++){var l=this.__stateList__[r].replace(/{{([^{}]+)}}/g,"$1");if(o=o.replace(/{{([^{}]+)}}/,e[l]),s&&~s.indexOf(l)&&!e[l]){var c=new RegExp(" "+l+'="'+e[l]+'"',"g");o=o.replace(c,"")}}return(n=document.createElement("div")).innerHTML=o,/^k-/.test(o)&&i.call(this,n),t&&n.childNodes[0].setAttribute("keet-id",e["keet-id"]),n.childNodes[0]}},{"./processEvent":6}],5:[function(e,t,n){var i=e("./genElement").genElement,s=e("./genElement").setState,o=e("./tmplHandler"),r=e("./processEvent"),a=e("./utils").genId,l=e("./genTemplate");t.exports=function(){if("object"!=typeof this.base)throw new Error("instance is not an object");var e=this,t=[],n=[].slice.call(arguments);return Array.isArray(this.base.model)?(this.base.template=this.base.template.trim().replace(/\s+/g," "),this.__stateList__=this.base.template.match(/{{([^{}]+)}}/g),this.base.model=this.base.model.map(function(e){return e["keet-id"]=a(),e}),this.base.model.map(function(n){t.push(l.call(e,n))})):Object.keys(this.base).map(function(l){var c=e.base[l];if(c&&"object"==typeof c){var p=a();c["keet-id"]=p,e.base[l]["keet-id"]=p;var u=i.apply(e,[c].concat(n));t.push(u)}else{e.__stateList__=[];var f=o.call(e,c,function(t){e.__stateList__=e.__stateList__.concat(t)}),h=document.createElement("div");h.innerHTML=f,s.call(e,n),r.call(e,h),h.childNodes.forEach(function(e){t.push(e)})}}),t}},{"./genElement":3,"./genTemplate":4,"./processEvent":6,"./tmplHandler":10,"./utils":12}],6:[function(e,t,n){var i=e("./elementUtils").loopChilds;t.exports=function(e){var t=this,n=[],s=[];i(n,e),n.map(function(e){if(1===e.nodeType&&e.hasAttributes())for(var n=0,i=e.attributes,o=i.length;n<o;n++){var r,a,l,c,p;/^k-/.test(i[n].nodeName)&&(r=i[n].nodeName.split("-")[1],a=i[n].nodeValue.split("("),"function"==typeof(l=t[a[0]])&&(s.push(i[n].nodeName),c=[],(p=a[1].slice(0,-1).split(",").filter(function(e){return""!==e})).length&&p.map(function(e){c.push(e)}),e.addEventListener(r,l.bind.apply(l.bind(t),[e].concat(c)),!1))),n===o-1&&s.map(function(t){e.removeAttribute(t)})}}),n=[]}},{"./elementUtils":2}],7:[function(e,t,n){t.exports=function(){return function(){var e,t,n=[].slice.call(arguments),i=["<",n[0],">",n[1],"</",n[0],">"];if(n.length>2&&"object"==typeof n[2])for(e in n[2])"boolean"==typeof n[2][e]&&n[2][e]?i.splice(2,0," ",e):"class"===e&&Array.isArray(n[2][e])?i.splice(2,0," ",e,'="',n[2][e].join(" ").trim(),'"'):i.splice(2,0," ",e,'="',n[2][e],'"');if(n.length>3&&"object"==typeof n[3]){for(e in t=[i.indexOf(">"),0,' style="'],n[3])t.push(e),t.push(":"),t.push(n[3][e]),t.push(";");t.push('"'),i.splice.apply(i,t)}return i}.apply(null,arguments).join("")}},{}],8:[function(e,t,n){var i=e("./genElement");t.exports=function(){var e=this,t=[].shift.call(arguments);Object.keys(t).map(function(n){var s=t[n].match(/{{([^{}]+)}}/g);if(s&&s.length){var o="";s.map(function(s){var r=s.replace(/{{([^{}]+)}}/g,"$1");void 0!==e[r]&&(i.updateStateList.call(e,r),!1===e[r]?delete t[n]:(o+=e[r],t[n]=o))})}})}},{"./genElement":3}],9:[function(e,t,n){t.exports=function(e,t){var n=this;if(e.class){var i=e.class.match(/{{([^{}]+)}}/g),s="";return i&&i.length&&i.map(function(e){var i=e.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[i]&&(t(i),n[i].cstore.map(function(e){s+=e+" "}))}),s.length?s.trim():e.class}return!1}},{}],10:[function(e,t,n){t.exports=function(e,t){var n=this,i=e.match(/{{([^{}]+)}}/g);return i&&i.length&&i.map(function(i){var s=i.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[s]&&(t(s),e=e.replace(/{{([^{}]+)}}/,n[s]))}),e}},{}],11:[function(e,t,n){var i=e("./copy");t.exports=function(e,t){var n=this,s=i(e);return e&&Object.keys(s).map(function(e){var i=s[e].match(/{{([^{}]+)}}/g);i&&i.length&&i.map(function(i){var o=i.replace(/{{([^{}]+)}}/g,"$1");void 0!==n[o]&&(t(o),s[e]=s[e].replace(/{{([^{}]+)}}/,n[o]))})}),s}},{"./copy":1}],12:[function(e,t,n){n.getId=function(e){return document.getElementById(e)},n.genId=function(){return Math.round(1*Math.random()*1e12).toString(32)},n.selector=function(e){return document.querySelector('[keet-id="'+e+'"]')}},{}],13:[function(e,t,n){"use strict";var i=e("./components/utils").getId,s=e("./components/utils").genId,o=e("./components/utils").selector,r=e("./components/parseStr"),a=e("./components/genTemplate"),l=e("./components/elementUtils").updateElem,c=function(e,t,n){var i,s=this;if(e<t.length)this._el.childNodes[e]||this._el.appendChild(t[e]),console.log(e,n,t[e]),e===n&&(this._el.childNodes[e]=t[e]),e++,c.apply(this,[e,t,n]);else{this.baseProxy=(i=this.base,new Proxy(i,{set:function(e,t,n){return e[t]=n,s.base[t]=e[t],!0},deleteProperty:function(e,t){var n=e[t]["keet-id"],i=o(n);return i&&i.remove(),delete s.base[t],!0}})),this.componentDidMount&&"function"==typeof this.componentDidMount&&this.componentDidMount()}};function p(){this.base={},Object.defineProperty(this,"__stateList__",{enumerable:!1,writable:!0}),Object.defineProperty(this,"_el",{enumerable:!1,writable:!0})}p.prototype.mount=function(e){return"object"==typeof e&&Object.keys(e).map(function(t){"string"==typeof e[t]?e[t]=e[t].trim().replace(/\s+/g," "):"object"==typeof e[t]&&"string"==typeof e[t].template&&(e[t].template=e[t].template.trim().replace(/\s+/g," "))}),this.base=e,this},p.prototype.flush=function(e){var t=i(this.el);return t&&(t.innerHTML=""),this},p.prototype.link=function(e){return this.el=e,this.componentWillMount&&"function"==typeof this.componentWillMount&&this.componentWillMount(),this.render(),this},p.prototype.render=function(e){this._el=i(this.el);var t=r.apply(this,this.args);return this._el&&c.apply(this,[0,t,e]),this},p.prototype.cluster=function(){var e=[].slice.call(arguments);e.length>0&&e.map(function(e){"function"==typeof e&&e()})},p.prototype.add=function(e,t){Array.isArray(this.base.model)&&(t&&(e["keet-id"]=s()),this.base.model=this.base.model.concat(e),this._el&&this._el.appendChild(a.apply(this,[e,t])))},p.prototype.destroy=function(e,t,n){Array.isArray(this.base.model)&&(this.base.model=this.base.model.filter(function(i,s){if(e!==i[t])return i;(n=n||o(i["keet-id"]))&&n.remove()}))},p.prototype.update=function(e,t,n,i){var s=this;Array.isArray(this.base.model)&&(this.base.model=this.base.model.map(function(r,c,p){return e===r[t]&&(n&&"function"==typeof n&&(r=n(r)),(i=i||o(r["keet-id"]))&&l(i,a.call(s,r))),r}))},t.exports=p},{"./components/elementUtils":2,"./components/genTemplate":4,"./components/parseStr":5,"./components/utils":12}]},{},[13])(13)});
/**
 * Keetjs v3.4.5 Alpha release: https://github.com/keetjs/keet.js
 * Minimalist view layer for the web
 *
 * <<<<<<<<<<<<<<<<<<<<<<<<<<<<<< Keetjs >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
 *
 * Copyright 2018, Shahrul Nizam Selamat
 * Released under the MIT License.
 */
