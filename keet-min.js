var keet=function(t){"use strict";function e(t,e,n){return a(n)&&n(t,e)}function n(t,e){for(var n in e)if(t[n]!==e[n])return!1;return!0}function r(t){return(t?t:"")+(1e17*Math.random()).toString(36).slice(0,4)}function i(t){return"object"===(void 0===t?"undefined":R(t))}function u(t){return"boolean"==typeof t}function o(t){return"string"==typeof t}function a(t){return"function"==typeof t}function c(t){return t instanceof Element}function s(t){return t instanceof Array}function f(t){return"number"==typeof t}function l(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0}function d(t){return new Promise(function(e){var n=setInterval(function(){c(t.vnode)&&(clearInterval(n),e(t.vnode))},0)})}function h(){this.render=function(){var t=U(regeneratorRuntime.mark(function t(e,n){var r,i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.elementName,i=new r,n.id?i.el=n.id:n.setAttribute("k-data",i.__ref__.id),t.next=5,d(i);case 5:u=t.sent,n.appendChild(u);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}function p(t,e){return t.replace(/([A-Z]+)/g,"-$1").toLowerCase()+":"+e[t]+";"}function m(t){return Object.keys(t).reduce(function(e,n){return[e,n].map(function(e){return""+p(e,t)}).join("")})}function b(t){return Object.keys(t).reduce(function(e,n){return[e,n].map(function(e){return""+(t[e]?e:"")}).join(" ").trim("")})}function v(t){var e=this;if(o(t)||f(t))return document.createTextNode(t);if(u(t))return document.createTextNode("");if(i(t)&&a(t.elementName))return document.createTextNode("");var n=document.createElement(t.elementName);return Object.keys(t.attributes||{}).forEach(function(r){var i=[r,t.attributes[r]];z(J,"default")(H.apply(void 0,i)).apply(e,[n].concat(i))}),(t.children||[]).forEach(function(t,r){if(null===t)return!1;var i=[t,n,v,r];z(Q,"default")(K.apply(void 0,i)).apply(e,i)}),n}function y(){this.vnode=v.apply(this,arguments)}function _(t){return new Promise(function(e){return a(t)&&e(t)})}function g(t,e){this.props=e||{},this.state=this.state||{},this.__ref__={id:r(),exec:t},Object.defineProperty(this,"__ref__",{enumerable:!1,configurable:!0}),W.call(this)}function x(t,e){return I(t,e)||k(t,e)||t.isEqualNode(e)}function k(t,e){return C(t)&&C(e)}function C(t){return null!=t.getAttribute("data-ignore")}function N(t,e){"INPUT"===t.nodeName&&(t.checked!==e.checked&&(t.checked=e.checked),t.value!==e.value&&(t.value=e.value))}function A(t,e){for(var n=e.attributes,r={},i=0;i<n.length;)r[n[i].name]=n[i].value,i++;for(var u=t.attributes,o={},a=0;a<u.length;)o[u[a].name]=u[a].value,a++;for(var c in r)t.attributes[c]&&t.attributes[c].name===c&&t.attributes[c].value!==r[c]?t.setAttribute(c,r[c]):t.hasAttribute(c)||t.setAttribute(c,r[c]);for(var s in o)e.attributes[s]&&t.attributes[s]||t.removeAttribute(s)}function w(t,e){if(t.nodeType===e.nodeType)if(t.nodeType===X){if(N(t,e),x(t,e)&&!e.firstChild)return;if(x(t,e)&&e.firstChild)return void O(t.firstChild,e.firstChild,t);t.nodeName===e.nodeName?t.hasAttribute("key")&&e.hasAttribute("key")?t.parentNode.replaceChild(e,t):(A(t,e),O(t.firstChild,e.firstChild,t)):t.parentNode.replaceChild(e,t)}else t.nodeValue!==e.nodeValue&&(t.nodeValue=e.nodeValue);else t.parentNode.replaceChild(e,t)}function S(t,e){return t.length-e-1}function j(t,e,n){for(var r=void 0;t>0;)t--,r=S(n,t),e.appendChild(n[r])}function O(t,e,n){for(var r=0,i=[];e;)r++,Y=e,e=e.nextSibling,i.push(Y);var u=void 0;if(t)for(;t;)r--,tt=t,t=t.nextSibling,u=S(i,r),tt&&i[u]?w(tt,i[u]):tt&&!i[u]&&n.removeChild(tt),null===t&&j(r,n,i);else j(r,n,i)}function I(t,e){return t&&A(t,e),e.hasAttribute("pristine-model")}function T(){var t=F(this.el)||document.querySelector('[k-data="'+this.__ref__.id+'"]');t&&!this.__ref__.IS_STUB?O(t.firstChild,this.vnode,t):t&&!I(null,this.vnode)&&O(t.firstChild,this.vnode.firstChild,t)}function P(){nt.call(this,T.bind(this),1)}function E(t){e(this.state,t,n)||(Object.assign(this.state,t),W.call(this).then(P.bind(this)))}var R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U=function(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,u){try{var o=e[i](u),a=o.value}catch(t){return void n(t)}return o.done?void t(a):Promise.resolve(a).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}},B=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),V=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F=function(t){return document.getElementById(t)},L=function(t,e){if(!t)throw Error("(keet) "+e)},q=function(){return function(t){t.__ref__&&(t.__ref__.IS_STUB=!0)}},M=function(){return function(t){t.prototype.subscribe=function(t,e){return L(a(e),"Second argument is not a function."),this.__ref__.exec=this.__ref__.exec[t]=e,t},t.prototype.unsubscribe=function(t){delete this.__ref__.exec[t]},t.prototype.publish=function(){var t=[].shift.call(arguments);a(this.__ref__.exec[t])&&this.__ref__.exec[t].apply(null,arguments)}}},Z=l,$=new h,z=function(t,e){return function(n){return t[Object.keys(t)[n]||e]}},D={},G=function(){var t=U(regeneratorRuntime.mark(function t(r,i,u){var o,c,s,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.elementName,c=Z(""+o),s=D[c]||new o(r.attributes),D[c]?(!e(s.props,r.attributes),n&&(Object.assign(s.props,r.attributes),s.batchUpdate())):D[c]=s,s.__ref__.IS_STUB=!0,!a(s.setState)){t.next=15;break}return t.next=8,d(s);case 8:f=t.sent,f.setAttribute("data-ignore",""),f.id?s.el=f.id:f.setAttribute("k-data",s.__ref__.id),i.appendChild(f),a(s.onChange)&&s.onChange(),t.next=16;break;case 15:i.appendChild(u.call(this,s));case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),H=function(t,e){return["style"===t&&i(e),t.match(/^on/)&&a(e),"className"===t,"value"===t].indexOf(!0)},J={style:function(t,e,n){t.setAttribute(e,m(n))},inline:function(t,e,n){t.addEventListener(e.replace(/^on/,""),n.bind(this),!1)},className:function(t,e,n){t.setAttribute("class",n)},value:function(t,e,n){t.value=n},default:function(t,e,n){i(n)?b(n)?t.setAttribute(e,b(n)):null:n?u(n)?t.setAttribute(e,""):t.setAttribute(e,n):null}},K=function(t){return[s(t),t.elementName&&a(t.elementName),t.elementName&&i(t.elementName)].indexOf(!0)},Q={_array:function(t,e){t.map(function(t){if(a(t.elementName)){return new(0,t.elementName)(t.attributes)}}).map(function(t){d(t).then(function(t){e.appendChild(t)})})},_function:G,_object:function(t,e){e.appendChild(v.call(this,t.elementName))},default:function(t,e){e.appendChild(v.call(this,t))}},W=U(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(this.render);case 2:e=t.sent,y.call(this,e.call(this));case 4:case"end":return t.stop()}},t,this)})),X=1,Y=void 0,tt=void 0,et={},nt=function(t,e){var n=this.__ref__.id;et[n]=et[n]||null,clearTimeout(et[n]),et[n]=setTimeout(t.bind(this),e)},rt=function(){function t(t){g.call(this,{},t)}return t.prototype.setState=function(){E.apply(this,arguments)},t.prototype.batchUpdate=function(){W.call(this).then(P.bind(this))},t}(),it=function(t,e){return t["kdata-id"]!==e["kdata-id"]},ut={},ot=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];ut[this.mId]&&clearTimeout(ut[this.mId]),ut[this.mId]=setTimeout(function(){return t.exec&&"function"==typeof t.exec&&t.exec.apply(null,n)},0)},at=function(){function t(e){this.mId=t.genIdentity,ut[this.mId]=null,this.enableFiltering=e||null,this.model=[],Object.defineProperty(this,"list",{enumerable:!1,configurable:!0,get:function(){return this.model},set:function(t){this.model=t,this.dirty=!0,ot.call(this,this.model,this.listFilter)}}),Object.defineProperty(this,"listFilter",{enumerable:!1,configurable:!0,get:function(){var t=this;return this.prop?this.model.filter(function(e){return e[t.prop]===t.value}):this.model}})}return t.prototype.subscribe=function(t){this.exec=t},t.prototype.add=function(t){this.list=this.list.concat(V({},t,{"kdata-id":r("mdata-")}))},t.prototype.update=function(t){this.list=this.list.map(function(e){return it(e,t)?e:t})},t.prototype.filter=function(t,e){this.prop=t,this.value=e,this.list=this.list},t.prototype.destroy=function(t){this.list=this.list.filter(function(e){return it(e,t)})},B(t,null,[{key:"genIdentity",get:function(){return r("model-")}}]),t}();return t.Component=rt,t.CreateModel=at,t.childLike=q,t.activatePubsub=M,t.v=$,t}({});
//# sourceMappingURL=keet-min.js.map